<div class="container-fluid">
<div class="row">
    <div class="col-xs-12">
        <div class="alert alert-info alert-dismissable" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4>Get started</h4>
            <ol>
                <li>Select a model to fit your data to</li>
                <li>Upload csv formatted data file</li>
                <li>Enter initial parameter guesses</li>
                <li>Click "Fit"</li>
            </ol>
        </div> <! -- Alert -->
    </div> <!-- Col -->
</div> <!-- Row -->

<div class="row">

    <div id="sidebar" class="col-xs-12 col-md-4 col-lg-3">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Control</h3>
        </div>

        <div class="panel-body">
            <form id="bindfit-form-selector" class="form-horizontal">
                <div class="form-group">
                    <div class="input-group col-xs-12">
                        {{#x-select action="onFitterSelect" class="form-control"}}
                            <option>Choose fitter</option>
                            {{#each fitList as |fitter|}}
                                {{#x-option value=fitter.key}}{{fitter.name}}{{/x-option}}
                            {{/each}}
                        {{/x-select}}
                    </div>
                </div>
            </form>

            {{#if fitOptions.isPopulated}}
                <form id="bindfit-form-params" class="form-horizontal" {{action "runFitter" on="enter"}}>
                    <div class="form-group">
                        <div class="input-group col-xs-12">
                            {{data-file-upload onComplete="onUploadComplete" onRestart="onUploadRestart"}}
                        </div>

                        {{#each fitOptions.params key="@index" as |param pi|}}
                            <div class="input-group col-xs-12">
                                <div class="input-group-addon">{{get-at-index fitLabels.params pi "label"}} guess</div>
                                {{input value=param.value type="number" class="form-control"}}
                                <div class="input-group-addon">{{get-at-index fitLabels.params pi "units"}}</div>
                            </div>
                        {{/each}}
                    </div>
                </form>

                <button class="btn btn-primary btn-block" {{action "runFitter"}}>Fit</button>
            {{/if}}

        </div>
    </div> <!-- Panel -->

    {{#if fitResult.isPopulated}}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Result</h3>
            </div>

            <table id="bindfit-result-params" class="table">
                <!-- <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Result</th>
                    </tr>
                </thead> -->

                <tbody>
                    {{#each fitResult.params key="@index" as |param pi|}}
                        <tr>
                            <th scope="row">{{get-at-index fitLabels.params pi "label"}}</th>
                            <td>{{param.value}}</td>
                            <td>{{get-at-index fitLabels.params pi "units"}}</td>
                        </tr>
                    {{/each}}
                </tbody>
            </table>

            <div class="panel-body">
               <!-- Save button -->
                {{#if fitSave.isPopulated}}
                    <a href={{fitSave.url}} target="_blank" class="btn btn-info btn-block">Link to saved fit</a>
                {{else}}
                    <button class="btn btn-default btn-block" {{action "saveFit"}}>Save</button>
                {{/if}}

                <!-- Export button -->
                {{#if fitExport.isPopulated}}
                    <a href={{fitExport.url}} class="btn btn-info btn-block">Download</a>
                {{else}}
                    <button class="btn btn-default btn-block" {{action "exportFit"}}>Export</button>
                {{/if}}
            </div>
        </div> <!-- Panel -->
    {{/if}}

    </div> <!-- Sidebar -->



    <div class="col-xs-12 col-md-8 col-lg-9">
        <div class="row">
        <div class="col-xs-12">
        <div class="panel panel-default">

            <div id="bindfit-result-chart" class="panel-body">
                {{bindfit-high-charts content=fitResult.chartData chartOptions=fitLabels.chartOptions theme=chartTheme}}
            </div> <!-- Chart -->

        </div> <!-- Panel for results -->
        </div> <!-- col -->
        </div> <!-- row -->

    </div> <!-- Main -->

</div> <!-- global row -->
</div> <!-- container -->
